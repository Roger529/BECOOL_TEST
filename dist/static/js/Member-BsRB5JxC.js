var w=(o,l,d)=>new Promise((v,n)=>{var r=p=>{try{h(d.next(p))}catch(e){n(e)}},_=p=>{try{h(d.throw(p))}catch(e){n(e)}},h=p=>p.done?v(p.value):Promise.resolve(p.value).then(r,_);h((d=d.apply(o,l)).next())});import{_ as C}from"./MainFooter-O_Sp1wki.js";import{_ as E}from"./MainHeader-DBsq0KDH.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as i,i as a,j as t,t as s,p as b,a as f,F as u,q as y,z as k,H as D,n as O,k as g,x as c,m as P}from"./vue-CpKcPlHy.js";const F={name:"OrderDetailPopup",props:{isVisible:{type:Boolean,default:!1},order:{type:Object,default:()=>({})}},methods:{closePopup(){this.$emit("close")}}},N={key:0,class:"popup-overlay"},x={class:"popup-content"},I={class:"order-info"},R={class:"info-row"},V={class:"info-row"},B={class:"info-row"},M={class:"info-row"},U={class:"info-row"},X={class:"info-row"},K={class:"info-row"};function T(o,l,d,v,n,r){return d.isVisible?(i(),a("div",N,[t("div",x,[t("button",{class:"close-btn",onClick:l[0]||(l[0]=(..._)=>r.closePopup&&r.closePopup(..._))},"×"),l[8]||(l[8]=t("h2",{class:"popup_mb"},"訂單詳情",-1)),t("div",I,[t("div",R,[l[1]||(l[1]=t("span",{class:"label"},"訂單編號：",-1)),t("span",null,s(d.order.orderId),1)]),t("div",V,[l[2]||(l[2]=t("span",{class:"label"},"訂購日期：",-1)),t("span",null,s(d.order.date),1)]),t("div",B,[l[3]||(l[3]=t("span",{class:"label"},"商品名稱：",-1)),t("span",null,s(d.order.productName),1)]),t("div",M,[l[4]||(l[4]=t("span",{class:"label"},"商品金額：",-1)),t("span",null,s(d.order.price)+" 元",1)]),t("div",U,[l[5]||(l[5]=t("span",{class:"label"},"數量：",-1)),t("span",null,s(d.order.quantity),1)]),t("div",X,[l[6]||(l[6]=t("span",{class:"label"},"配送狀態：",-1)),t("span",null,s(d.order.status),1)]),t("div",K,[l[7]||(l[7]=t("span",{class:"label"},"收件地址：",-1)),t("span",null,s(d.order.address),1)])])])])):b("",!0)}const j=S(F,[["render",T],["__scopeId","data-v-099788fa"]]),q="/BECOOL_TEST/static/png/mbhead-BLOmt6G-.png",H={components:{MainHeader:E,MainFooter:C,OrderDetailPopup:j},data(){return{activeSection:"purchase",userData:JSON.parse(localStorage.getItem("userData"))||{name:"大中天",password:"********",phone:"0912345678",email:"example@email.com"},tempData:{name:"",password:"",phone:"",email:""},editStates:{name:!1,password:!1,phone:!1,email:!1},validationErrors:{phone:"",email:""},showOrderPopup:!1,selectedOrder:null,purchaseRecords:[{orderId:"ORD001",date:"2024/12/25",productName:"環保吸管",price:300,quantity:1,status:"已送達",address:"台北市大安區復興南路一段390號2樓",source:"環保市集"}]}},methods:{showOrderDetail(o){this.selectedOrder=o,this.showOrderPopup=!0},showSection(o){this.activeSection=o},closeOrderPopup(){this.showOrderPopup=!1,this.selectedOrder=null},editField(o){this.tempData[o]=o==="password"?"":this.userData[o],this.editStates[o]=!0,this.validationErrors[o]&&(this.validationErrors[o]="")},validateField(o){return o==="phone"?this.tempData.phone?/^09\d{8}$/.test(this.tempData.phone)?(this.validationErrors.phone="",!0):(this.validationErrors.phone="請輸入正確的手機格式（09開頭共10碼）",!1):(this.validationErrors.phone="請輸入手機號碼",!1):o==="email"?this.tempData.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.tempData.email)?(this.validationErrors.email="",!0):(this.validationErrors.email="請輸入正確的電子郵件格式",!1):(this.validationErrors.email="請輸入電子郵件",!1):!0},formatEmail(o){return o.replace(/(.{30})/g,`$1
`)},saveField(o){this.validateField(o)&&this.tempData[o].trim()&&(this.userData[o]=this.tempData[o].trim(),localStorage.setItem("userData",JSON.stringify(this.userData)),this.editStates[o]=!1,this.tempData[o]="",this.validationErrors[o]="")},fetchUserData(){return w(this,null,function*(){try{const l=yield(yield fetch("/api/user-profile")).json();this.userData=l,localStorage.setItem("userData",JSON.stringify(l))}catch(o){console.error("Error fetching user data:",o)}})}}},J={class:"wrapperpr"},L={class:"profile_top"},z={class:"profile-container-special_left"},G={class:"profile-header-special"},A={class:"profile-greeting-special"},Q={class:"profile-container-special_right"},W={class:"profile-info-special"},Y={class:"profile-field"},Z={class:"input_2"},$={class:"profile-field"},tt={key:0,class:"error-message"},et={class:"input_2"},lt={class:"profile-field"},st={key:0,class:"error-message"},nt={class:"input_2 email-display"},ot={class:"profile_bottom"},it={class:"purchase-record-special"},at={class:"btn2_btn"},rt={class:"btn2_btn_top"},dt={class:"table-container_mb"},ut={key:0,class:"table_mb"},pt={class:"delivered-special"},ct=["onClick"],mt={class:"delivered-special"},_t=["onClick"],ht={class:"delivered-special"},bt=["onClick"],vt={class:"delivered-special"},ft=["onClick"],yt={class:"delivered-special"},kt=["onClick"],Dt={class:"delivered-special"},wt=["onClick"],Ot={class:"delivered-special"},gt=["onClick"],Ct={class:"table-container_mb"},Et={key:0,class:"personal-record"};function St(o,l,d,v,n,r){const _=E,h=P("OrderDetailPopup"),p=C;return i(),a(u,null,[f(_),t("div",J,[l[21]||(l[21]=t("h1",{class:"profile-title"},"會員資訊",-1)),t("div",L,[t("div",z,[t("div",G,[l[14]||(l[14]=t("img",{src:q,alt:"會員頭像",class:"profile-pic-special"},null,-1)),t("h1",A,s(n.userData.name)+" 您好！",1)])]),t("div",Q,[t("div",W,[t("div",Y,[l[15]||(l[15]=t("label",{for:"name",class:"label_mb"},"姓名",-1)),n.editStates.name?(i(),a(u,{key:0},[y(t("input",{type:"text",id:"name","onUpdate:modelValue":l[0]||(l[0]=e=>n.tempData.name=e),placeholder:"輸入您的姓名",class:"input_2 input_editing",onKeyup:l[1]||(l[1]=D(e=>r.saveField("name"),["enter"]))},null,544),[[k,n.tempData.name]]),t("button",{class:"button_mb",onClick:l[2]||(l[2]=e=>r.saveField("name"))},"儲存")],64)):(i(),a(u,{key:1},[t("span",Z,s(n.userData.name),1),t("button",{class:"button_mb",onClick:l[3]||(l[3]=e=>r.editField("name"))},"修改")],64))]),t("div",$,[l[16]||(l[16]=t("label",{for:"phone",class:"label_mb"},"手機",-1)),n.editStates.phone?(i(),a(u,{key:0},[y(t("input",{type:"text",id:"phone","onUpdate:modelValue":l[4]||(l[4]=e=>n.tempData.phone=e),placeholder:"輸入您的手機",class:O(["input_2 input_editing",{"input-error":n.validationErrors.phone}]),onKeyup:l[5]||(l[5]=D(e=>r.saveField("phone"),["enter"]))},null,34),[[k,n.tempData.phone]]),t("button",{class:"button_mb",onClick:l[6]||(l[6]=e=>r.saveField("phone"))},"儲存"),n.validationErrors.phone?(i(),a("span",tt,s(n.validationErrors.phone),1)):b("",!0)],64)):(i(),a(u,{key:1},[t("span",et,s(n.userData.phone),1),t("button",{class:"button_mb",onClick:l[7]||(l[7]=e=>r.editField("phone"))},"修改")],64))]),t("div",lt,[l[17]||(l[17]=t("label",{for:"email",class:"label_mb"},"信箱",-1)),n.editStates.email?(i(),a(u,{key:0},[y(t("input",{type:"email",id:"email","onUpdate:modelValue":l[8]||(l[8]=e=>n.tempData.email=e),placeholder:"輸入您的信箱",class:O(["input_2 input_editing",{"input-error":n.validationErrors.email}]),onKeyup:l[9]||(l[9]=D(e=>r.saveField("email"),["enter"]))},null,34),[[k,n.tempData.email]]),t("button",{class:"button_mb",onClick:l[10]||(l[10]=e=>r.saveField("email"))},"儲存"),n.validationErrors.email?(i(),a("span",st,s(n.validationErrors.email),1)):b("",!0)],64)):(i(),a(u,{key:1},[t("span",nt,s(r.formatEmail(n.userData.email)),1),t("button",{class:"button_mb",onClick:l[11]||(l[11]=e=>r.editField("email"))},"修改")],64))])])])]),t("div",ot,[t("div",it,[t("div",at,[t("div",rt,[t("button",{class:"purchase-record-btn11",onClick:l[12]||(l[12]=e=>r.showSection("purchase"))},"購買紀錄"),t("button",{class:"purchase-record-btn12",onClick:l[13]||(l[13]=e=>r.showSection("profile"))},"個人紀錄")]),l[18]||(l[18]=t("div",{class:"bt2_btn_bottom"},[t("div",{class:"profile-stats-special"},[t("p",null,[g("小寵物經驗值: "),t("strong",null,"200"),g(" | 累積地球幣: "),t("strong",null,"300")])])],-1))]),t("div",dt,[n.activeSection==="purchase"?(i(),a("table",ut,[l[19]||(l[19]=t("thead",null,[t("tr",null,[t("th",null,"日期"),t("th",null,"商品名稱"),t("th",null,"消費金額"),t("th",null,"來源"),t("th",null,"配送狀態"),t("th",null,"訂單詳情")])],-1)),(i(!0),a(u,null,c(n.purchaseRecords,e=>(i(),a("tbody",{key:e.orderId},[t("tr",null,[t("td",null,s(e.date),1),t("td",null,s(e.productName),1),t("td",null,s(e.price),1),t("td",null,s(e.source),1),t("td",pt,s(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:m=>r.showOrderDetail(e)},"訂單詳情",8,ct)])])]))),128)),(i(!0),a(u,null,c(n.purchaseRecords,e=>(i(),a("tbody",{key:e.orderId},[t("tr",null,[t("td",null,s(e.date),1),t("td",null,s(e.productName),1),t("td",null,s(e.price),1),t("td",null,s(e.source),1),t("td",mt,s(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:m=>r.showOrderDetail(e)},"訂單詳情",8,_t)])])]))),128)),(i(!0),a(u,null,c(n.purchaseRecords,e=>(i(),a("tbody",{key:e.orderId},[t("tr",null,[t("td",null,s(e.date),1),t("td",null,s(e.productName),1),t("td",null,s(e.price),1),t("td",null,s(e.source),1),t("td",ht,s(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:m=>r.showOrderDetail(e)},"訂單詳情",8,bt)])])]))),128)),(i(!0),a(u,null,c(n.purchaseRecords,e=>(i(),a("tbody",{key:e.orderId},[t("tr",null,[t("td",null,s(e.date),1),t("td",null,s(e.productName),1),t("td",null,s(e.price),1),t("td",null,s(e.source),1),t("td",vt,s(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:m=>r.showOrderDetail(e)},"訂單詳情",8,ft)])])]))),128)),(i(!0),a(u,null,c(n.purchaseRecords,e=>(i(),a("tbody",{key:e.orderId},[t("tr",null,[t("td",null,s(e.date),1),t("td",null,s(e.productName),1),t("td",null,s(e.price),1),t("td",null,s(e.source),1),t("td",yt,s(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:m=>r.showOrderDetail(e)},"訂單詳情",8,kt)])])]))),128)),(i(!0),a(u,null,c(n.purchaseRecords,e=>(i(),a("tbody",{key:e.orderId},[t("tr",null,[t("td",null,s(e.date),1),t("td",null,s(e.productName),1),t("td",null,s(e.price),1),t("td",null,s(e.source),1),t("td",Dt,s(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:m=>r.showOrderDetail(e)},"訂單詳情",8,wt)])])]))),128)),(i(!0),a(u,null,c(n.purchaseRecords,e=>(i(),a("tbody",{key:e.orderId},[t("tr",null,[t("td",null,s(e.date),1),t("td",null,s(e.productName),1),t("td",null,s(e.price),1),t("td",null,s(e.source),1),t("td",Ot,s(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:m=>r.showOrderDetail(e)},"訂單詳情",8,gt)])])]))),128))])):b("",!0),t("div",Ct,[n.activeSection==="profile"?(i(),a("table",Et,l[20]||(l[20]=[t("thead",null,[t("tr",null,[t("th",null,"日期"),t("th",null,"地球幣"),t("th",null,"經驗值")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1)]))):b("",!0)])])]),f(h,{"is-visible":n.showOrderPopup,order:n.selectedOrder,onClose:r.closeOrderPopup},null,8,["is-visible","order","onClose"]),f(p,{class:"footer_member"})])])],64)}const Rt=S(H,[["render",St]]);export{Rt as default};
